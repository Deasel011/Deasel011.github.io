<h2>
    <a id="user-content-à-quoi-sert-une-vue-partielle" class="anchor" href="#%C3%A0-quoi-sert-une-vue-partielle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>À quoi sert une vue partielle</h2>
<p>Une vue partielle sert à définir des éléments visuels simples souvent redondants à travers un site web.
    On peut penser tout de suite à une bannière informative.
    On peut aussi créer des vues partielles pour séparer une vue en plusieurs éléments afin de rentre le code de la vue principale beaucoup plus léger.</p>
<p>Tout comme une vue, une vue partielle peut être couplée à un modèle auquel nous allons passer des données à partir de la vue appelante.
    Le rôle de la vue partielle est ainsi de faire le formatage du modèle (si une donnée lui est passée),de montré un élément redondant ou encore de formatter un sous-partie d'une vue!</p>
<h2>
    <a id="user-content-comment-créer-une-vue-partielle" class="anchor" href="#comment-cr%C3%A9er-une-vue-partielle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comment créer une vue partielle</h2>
<p>À la base, une vue partielle se crée de la même façon qu’une vue traditionnelle, c'est à dire un fichier Razor (.cshtml).
    Avec Visuel Studio, on va ajouter un nouvel objet de vue dans un des répertoires prévus à cet effet.</p>
<p><a href="https://raw.githubusercontent.com/Deasel011/Deasel011.github.io/master/content/CreatePartial.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/Deasel011/Deasel011.github.io/master/content/CreatePartial.png" alt="Right Click on the folder where you want to add the partial view then add item then select MVC Partial View" style="max-width:100%;"></a></p>
<p>Dans le cas standard, nous allons les créées sous le même répertoire que la vue appelante.
    (voir comment fonctionne la découverte des vue partielles en annexe si c’est une vue partagée)
    Une vue partielle n'aura pas la structure d'une vue complète, elle sera vide car on veut y définir des éléments plus granulaires.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;À propos&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">p</span>&gt;Ceci est une vue partielle&lt;/<span class="pl-ent">p</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
<p>Nous pouvons lui rajouter un modèle de données fortement typé qui correspond au format de la donnée qu'elle va recevoir.</p>
<div class="highlight highlight-text-html-basic"><pre>@model DemoMVC_framework.Models.Auteur

&lt;<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;À propos&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">p</span>&gt;Ceci est une vue partielle créée par @Model.nom&lt;/<span class="pl-ent">p</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
<p>Il est aussi possible d'utiliser des données provenant d'une méthode non typée (Viewbag).
    Dans ce cas, exactement comme une vue, nous rajoutons des données dans le dictionnaire de la vue en amont et nous auront accès à ce dictionnaire au travers de notre vue partielle.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;À propos&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">p</span>&gt;Ceci est une vue partielle créée par @ViewData["NomAuteur"]&lt;/<span class="pl-ent">p</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
<p>Enfin, une vue partielle se préfixe par un souligner afin de la différencié d'une vue standard : <code>_NomDeVuePartielle</code>.</p>
<h2>
    <a id="user-content-comment-utiliser-une-vue-partielle" class="anchor" href="#comment-utiliser-une-vue-partielle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comment utiliser une vue partielle</h2>
<p>Il y a plusieurs méthodes disponible pour invoqué une vue partielle.
    Si nous avons besoin de remplir un modèle de la vue partielle avec des données fortement typées, nous utiliserons les méthodes C# évaluées à travers le code Razor.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
	@await Html.PartialAsync("_VueAvecModele",Model.product)
...</pre></div>
<p>Il est aussi possible d'invoquer cette méthode sans donnée.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
	@await Html.PartialAsync("_VueSansModele")
...</pre></div>
<p><sub>Avec l'utilisation de .Net Core, l'utilisation de méthodes asynchrones (async) est préféré et souvent obligatoire pour des raisons de performances du code.
    Pour plus de détails concernant la programmation asynchrone voir ce <a href="https://docs.microsoft.com/fr-ca/dotnet/csharp/programming-guide/concepts/async/" rel="nofollow">lien</a>.</sub></p>
<p>Une vue partielle hérite du dictionnaire de données de la vue parente.
    C'est-à-dire qu'une vue partielle peut appeller directement le "Viewbag" avec les données du contexte parent.</p>
<p>Une nouvelle façon d'invoqué des vue partielles à été ajoutée avec .Net Core.
    Le code Razor supporte désormais une balise "partial" qui réfère à la vue en question.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
	&lt;<span class="pl-ent">partial</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>_VueSansModele<span class="pl-pds">"</span></span>/&gt;
...</pre></div>
<p>Lorsqu'on réffère à la vue partielle par son nom, si elle se trouve dans le même répertoire que la vue parente, nous n'avons pas besoin de mettre le chemin ni l'extension de la vue partielle.
    Par contre, si la structure du projet n'est pas standard, il est possible que l'on doivent spécifier l'emplacement et l'extension de la vue partielle.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span>&gt;
	&lt;<span class="pl-ent">partial</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>../_VueDansUnRepertoireParent.cshtml<span class="pl-pds">"</span></span>/&gt;
	&lt;<span class="pl-ent">partial</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>~/RepertoireBidon/_VueDansUnRepertoireBidonAPartirDeLaRacideDuProjet.cshtml<span class="pl-pds">"</span></span>/&gt;
...</pre></div>
<h3>
    <a id="user-content-attention" class="anchor" href="#attention" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Attention</h3>
<p><span>Il n’est pas bonne pratique de passer trop de données à une vue partielle car les modifications faites à l’intérieur de celle-ci ne sont pas transmises à la vue supérieure. Lorsqu’il y aura des données à modifié, nous allons plutôt privilégier ce qu’on appelle des composants de vues, qui eux existent explicitement pour être appelées par des vue parentes et on va les construire pour qu’elles soient agnostiques du contexte de l’appelant.</span></p>
